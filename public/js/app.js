(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(t,e,n){n("bUC5"),n("pyCd"),t.exports=n("YT72")},YT72:function(t,e){},bUC5:function(t,e,n){"use strict";n.r(e);n("3yRE");var a=n("UBTA"),r=n.n(a);var i={};i.create=function(t,e,n){return a={x:t/n,y:e},[r.a.createSnapGrid(a)];var a};var s=i,o={resource:function(t){r.a.isSet(t)||(r()(t).dropzone({listeners:{dragenter:function(t){t.target.classList.add("droppable")},dragleave:function(t){t.target.classList.remove("droppable")},drop:function(t){var e=t.target,n=t.relatedTarget,a={id:parseInt(n.dataset.id),user_id:parseInt(n.dataset.user),start_time:parseInt(n.dataset.start),end_time:parseInt(n.dataset.end),resource_id:parseInt(e.dataset.id)},r=Math.round((n.getBoundingClientRect().left-e.getBoundingClientRect().left)/e.clientWidth*HYDROFON.Segel.component.data.timestamps.duration+HYDROFON.Segel.component.data.timestamps.start),i=a.end_time-(a.start_time-r);a.start_time=r,a.end_time=i;var s=document.createElement("div");s.classList.add("progress"),n.appendChild(s),HYDROFON.Segel.component.call("updateBooking",a),n.classList.remove("droppable")}}}),r()(t).on("doubletap",(function(t){var e=t.target;if("segel-resource"===e.className){var n=Math.round(t.offsetX/e.clientWidth*HYDROFON.Segel.component.data.timestamps.duration),a=Math.round(HYDROFON.Segel.component.data.timestamps.duration/HYDROFON.Segel.component.data.steps),r=n+HYDROFON.Segel.component.data.timestamps.start,i=r+2*a;HYDROFON.Segel.component.call("createBooking",{resource_id:parseInt(t.target.dataset.id),start_time:r,end_time:i})}})))},booking:function(t){if(!r.a.isSet(t)){var e={x:0,y:0};r()(t).draggable({listeners:{start:function(t){t.target.classList.add("is-dragging")},move:function(t){e.x+=t.dx,e.y+=t.dy,t.target.style.transform="translate(".concat(e.x,"px, ").concat(e.y,"px)")},end:function(t){t.target.classList.remove("is-dragging")}},modifiers:[r.a.modifiers.restrict({restriction:".segel-resources"}),r.a.modifiers.snap({targets:HYDROFON.Segel.grid,offset:"startCoords"})]}),r()(t).resizable({edges:{top:!1,bottom:!1,left:".segel-resize-handle__left",right:".segel-resize-handle__right"},listeners:{start:function(t){t.target.classList.add("is-resizing")},move:function(t){var e=t.target.dataset,n=e.x,a=e.y;n=(parseFloat(n)||0)+t.deltaRect.left,a=(parseFloat(a)||0)+t.deltaRect.top,Object.assign(t.target.style,{width:"".concat(t.rect.width,"px"),height:"".concat(t.rect.height,"px"),transform:"translate(".concat(n,"px, ").concat(a,"px)")}),Object.assign(t.target.dataset,{x:n,y:a})},end:function(t){var e=t.target,n=e.parentNode,a=e.dataset.x;a=parseFloat(a)||0;var r={id:parseInt(e.dataset.id),user_id:parseInt(e.dataset.user),start_time:parseInt(e.dataset.start),end_time:parseInt(e.dataset.end),resource_id:parseInt(n.dataset.id)},i=Math.round((e.getBoundingClientRect().left-n.getBoundingClientRect().left)/n.clientWidth*HYDROFON.Segel.component.data.timestamps.duration+HYDROFON.Segel.component.data.timestamps.start),s=Math.round(e.getBoundingClientRect().width/n.clientWidth*HYDROFON.Segel.component.data.timestamps.duration+i);r.start_time=i,r.end_time=s;var o=document.createElement("div");o.classList.add("progress"),e.appendChild(o),HYDROFON.Segel.component.call("updateBooking",r),t.target.classList.remove("is-resizing")}},modifiers:[r.a.modifiers.restrict({restriction:".segel-resources"}),r.a.modifiers.restrictSize(HYDROFON.Segel.size),r.a.modifiers.snap({targets:HYDROFON.Segel.grid,offset:"startCoords"})]}),r()(t).on("doubletap",(function(t){HYDROFON.Segel.component.call("deleteBooking",{id:parseInt(t.target.dataset.id)})}))}}},d=o,c=n("yNSA");function l(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,i=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,r=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}HYDROFON.Segel={_component:null,_element:null,grid:null,size:null,interactions:d,set component(t){this._component=t,this._element=t.el.el,this.calculateGrid()},get component(){return this._component},get element(){return this._element},set resources(t){this._debounceResources(t)},set expanded(t){this._debounceExpanded(t)},_debounceExpanded:Object(c.a)((function(t){HYDROFON.Segel.component.call("setExpanded",t)}),1e3),_debounceResources:Object(c.a)((function(t){HYDROFON.Segel.component.call("setResources",t)}),1e3),calculateGrid:function(){this.grid=s.create(this.element.clientWidth,40,this.component.data.steps),this.size={min:{width:this.element.clientWidth/this.component.data.steps,height:1},max:{width:this.element.clientWidth,height:40}}},handleResize:function(){this.calculateGrid();var t,e=l(this.element.querySelectorAll(".segel-booking"));try{for(e.s();!(t=e.n()).done;){var n=t.value,a=interact(n).draggable(),r=interact(n).resizable();a.modifiers[1].options.targets=this.grid,r.modifiers[2].options.targets=this.grid,r.modifiers[1].options.min=this.size.min,r.modifiers[1].options.max=this.size.max}}catch(t){e.e(t)}finally{e.f()}}},window.interact=r.a},pyCd:function(t,e){}},[[0,1,2]]]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(e,t,n){n("bUC5"),n("pyCd"),e.exports=n("YT72")},YT72:function(e,t){},bUC5:function(e,t,n){"use strict";n.r(t);n("3yRE");var a=n("UBTA"),i=n.n(a),r=n("zwY0"),s=n.n(r);var o={};o.create=function(e,t,n){return a={x:e/n,y:t},[i.a.createSnapGrid(a)];var a};var d=o,c={resource:function(e){i.a.isSet(e)||(i()(e).dropzone({listeners:{dragenter:function(e){e.target.classList.add("droppable")},dragleave:function(e){e.target.classList.remove("droppable")},drop:function(e){var t=e.target,n=e.relatedTarget,a={id:parseInt(n.dataset.id),user_id:parseInt(n.dataset.user),start_time:parseInt(n.dataset.start),end_time:parseInt(n.dataset.end),resource_id:parseInt(t.dataset.id)},i=Math.round((n.getBoundingClientRect().left-t.getBoundingClientRect().left)/t.clientWidth*HYDROFON.Segel.component.data.timestamps.duration+HYDROFON.Segel.component.data.timestamps.start),r=a.end_time-(a.start_time-i);a.start_time=i,a.end_time=r;var s=document.createElement("div");s.classList.add("progress"),n.appendChild(s),HYDROFON.Segel.component.call("updateBooking",a),n.classList.remove("droppable")}}}),i()(e).on("doubletap",(function(e){if("segel-resource"===e.target.className||"segel-bookings"===e.target.className){var t="segel-resource"===e.target.className?e.target:e.target.parentNode,n=Math.round(e.offsetX/t.clientWidth*HYDROFON.Segel.component.data.timestamps.duration),a=Math.round(HYDROFON.Segel.component.data.timestamps.duration/HYDROFON.Segel.component.data.steps),i=n+HYDROFON.Segel.component.data.timestamps.start,r=i+2*a;HYDROFON.Segel.component.call("createBooking",{resource_id:parseInt(t.dataset.id),start_time:i,end_time:r})}})))},booking:function(e){if(!i.a.isSet(e)&&e.classList.contains("editable")){var t={x:0,y:0};i()(e).draggable({listeners:{start:function(e){e.target.classList.add("is-dragging")},move:function(e){t.x+=e.dx,t.y+=e.dy,e.target.style.transform="translate(".concat(t.x,"px, ").concat(t.y,"px)")},end:function(e){e.target.classList.remove("is-dragging")}},modifiers:[i.a.modifiers.restrict({restriction:".segel-resources"}),i.a.modifiers.snap({targets:HYDROFON.Segel.grid,offset:"startCoords"})]}),i()(e).resizable({edges:{top:!1,bottom:!1,left:".segel-resize-handle__left",right:".segel-resize-handle__right"},listeners:{start:function(e){e.target.classList.add("is-resizing")},move:function(e){var t=e.target.dataset,n=t.x,a=t.y;n=(parseFloat(n)||0)+e.deltaRect.left,a=(parseFloat(a)||0)+e.deltaRect.top,Object.assign(e.target.style,{width:"".concat(e.rect.width,"px"),height:"".concat(e.rect.height,"px"),transform:"translate(".concat(n,"px, ").concat(a,"px)")}),Object.assign(e.target.dataset,{x:n,y:a})},end:function(e){var t=e.target,n=t.parentNode,a=t.dataset.x;a=parseFloat(a)||0;var i={id:parseInt(t.dataset.id),user_id:parseInt(t.dataset.user),start_time:parseInt(t.dataset.start),end_time:parseInt(t.dataset.end),resource_id:parseInt(n.dataset.id)},r=Math.round((t.getBoundingClientRect().left-n.getBoundingClientRect().left)/n.clientWidth*HYDROFON.Segel.component.data.timestamps.duration+HYDROFON.Segel.component.data.timestamps.start),s=Math.round(t.getBoundingClientRect().width/n.clientWidth*HYDROFON.Segel.component.data.timestamps.duration+r);i.start_time=r,i.end_time=s;var o=document.createElement("div");o.classList.add("progress"),t.appendChild(o),HYDROFON.Segel.component.call("updateBooking",i),e.target.classList.remove("is-resizing")}},modifiers:[i.a.modifiers.restrict({restriction:".segel-resources"}),i.a.modifiers.restrictSize(HYDROFON.Segel.size),i.a.modifiers.snap({targets:HYDROFON.Segel.grid,offset:"startCoords"})]}),i()(e).on("doubletap",(function(e){HYDROFON.Segel.component.call("deleteBooking",{id:parseInt(e.target.dataset.id)})}))}else e.classList.contains("editable")||i()(e).unset()}},l=c,u=n("yNSA");function g(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,r=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(s)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}HYDROFON.Segel={_component:null,_element:null,initialized:!1,grid:null,size:null,interactions:l,set component(e){this._component=e,this._element=e.el.el,this.calculateGrid(),this.initialized=!0},get component(){return this._component},get element(){return this._element},set resources(e){this._debounceResources(e)},set expanded(e){this._debounceExpanded(e)},_debounceExpanded:Object(u.a)((function(e){HYDROFON.Segel.component.call("setExpanded",e)}),1e3),_debounceResources:Object(u.a)((function(e){HYDROFON.Segel.component.call("setResources",e)}),1e3),calculateGrid:function(){this.grid=d.create(this.element.clientWidth,40,this.component.data.steps),this.size={min:{width:this.element.clientWidth/this.component.data.steps,height:1},max:{width:this.element.clientWidth,height:40}}},handleResize:function(){this.calculateGrid();var e,t=g(this.element.querySelectorAll(".segel-booking"));try{for(t.s();!(e=t.n()).done;){var n=e.value,a=interact(n).draggable(),i=interact(n).resizable();a.modifiers[1].options.targets=this.grid,i.modifiers[2].options.targets=this.grid,i.modifiers[1].options.min=this.size.min,i.modifiers[1].options.max=this.size.max}}catch(e){t.e(e)}finally{t.f()}}},window.interact=i.a,window.flatpickr=s.a},pyCd:function(e,t){}},[[0,1,2]]]);